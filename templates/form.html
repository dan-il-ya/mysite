{% extends "base_page.html" %}

{% block page-title %}
Главная
{% endblock %}

{% block page-lead %}
<h3> Форма добавления новой задачи</h3>
{% if problem_posted %} {{ comment }} {% else %} {% endif %}
{% endblock %}

{% block content %}
<div class="row">
    <div class="col s8 push-s2">
        <form method="post"> 
            <div class="input-field col s6">
                <select id="section" name="section">
                    <option value="" disabled selected> Выберите раздел </option>
                    {% for num, section in sections_list %}
                    <option value="{{num}}"> {{section}} </option>
                    {% endfor %}
                    <option value="0"> Другое </option>
                </select>
            </div>

            <div class="input-field col s6">
                <input disabled id="new_section" name="new_section" type="text" class="validate">
                <label for="new_section">Введите название нового раздела</label>
            </div>

            <br/>
            <div class="row">
                <div class="input-field col s12">
                    <input id="problem_text" name="problem_text" type="text" class="validate">
                    <label for="problem_text">Текст задачи (частично поддерживает LaTeX)</label>
                </div>
            </div>
            <br/>
            <center>
                <button class="btn waves-effect waves-light" type="submit" name="btn2" formaction="/form">
                    Отправить
                    <i class="material-icons right">send</i>
                </button>
            </center>
        </form>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('select');
    var instances = M.FormSelect.init(elems);
  });
</script>
<script>
    var sel = document.getElementById("section"), text = document.getElementById("new_section");

    sel.onchange = function(e) {
        text.disabled = (sel.value !== "0");
    };
</script>
{% endblock %}
